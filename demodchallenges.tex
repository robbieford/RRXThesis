\chapter{Demodulation Challenges}
While analyzing different demodulation algorithms and trying to improve their performance there were a few phenomena that were observed. Specifically there were aspects that proved problematic for software based demodulation, and although they are probably challenges to all types of demodulation and not just those that are software based, they were noticed during these analyses. While inspecting performance of the algorithms the following items gave us difficulty and can all be attributed to the fact that APRS uses RF and hence is susceptible to all the items relating to an RF transmission. A couple of highlights that some of the algorithms had to be coded around are: DC Offset, White Noise, RF Characteristics, and emphasis.

\section{Challenges induced due to RF Transmission}
The main challenge in decoding the APRS data was the fact that the digital stream in converted to an audio signal and then transmitted over RF. The addition of RF adds a whole plethora of obstacles which can include Path Loss, Multipath, Fading, Doppler effects, Co-channel interference, Interference and Noise, and Foliage \cite{Goleniewski2006}. A couple of items that will be highlighted due to the fact that some of the algorithms had to be coded around them are: DC Offset, Noise, and Emphasis.

\subsection{Challenge: DC Offset}
An audio signal can be characterized by a sine wave. In order to get different sounds the frequency of the sine wave is changed and in the context here, the two frequencies are 1200Hz and 2200Hz. Since an audio is a sine wave, the average value should be zero. The zero value is commonly referred to as the ground of the audio signal, and as the definition would imply the signal should spend the same amount of time above ground as it does below ground. As the performance of the zero crossing algorithm was investigated it was very evident that this was a challenge. If one assumes that the signal is centered about zero, and it is not, some of the logical decisions that are made will not hold true. More information on this later, for now take a look at Figure \ref{DCOffsetExample} and notice that the signal is not centered around zero.
\begin{figure}
  \centering
	\includegraphics[width=0.75\linewidth]{images/EffectsofaDCOffsetonaSignal.png} 
	\caption{An Example Bell 202 signal with a DC offset Problem.}
   \label{DCOffsetExample}
\end{figure}

\subsection{Challenge: Noise}
First, a definition of noise in this context: noise refers to unwanted electrical signals present in electrical systems \cite{Sklar1988}. Since the data is a FSK signal that is then frequency modulated keeping the signal to noise ratio low is important so that the signal comes through as clean as possible. This is not the case for just the signals used in the specific application of APRS but with all wireless technologies. One cause of noise is increased distance between the transmitter and receiver. An example that many are probably familiar with is as a client gets farther away from a wireless access point the bandwidth decreases. This happens because the signal strength drops off like 1 / distance cubed \cite{4Gon}. What was noticed when some of the algorithms were being debugged, was that the random noise that could be inflicted due to the nature of transmitting a wireless signal caused significant problems.

One such example of this is if the noise happened to also take on the form of a sine wave and the algorithm locked onto that frequency instead of the 1200Hz or 2200Hz signal that was wanted to be decoded. Alternatively, if the noise was just random and jostled the signal in the correct spot 1200Hz tones might look like 2200Hz (this ended up being fairly common) or vice versa. An example of what noise may look like on the original signal is in the Figure \ref{noiseExample}.
\begin{figure}
  \centering
	\includegraphics[width=0.75\linewidth]{images/Datasignalencodingbitstream0000WithNoise.png} 
	\caption{Example Bell 202 signal encoding the bit stream '0000'.}
   \label{noiseExample}
\end{figure}

\subsection{Challenge: Emphasis}
The best has been saved for last, emphasis. Preemphasis is when the the higher audio tones in a Frequency Modulated (FM) signal are intentionally increased and deemphasis is when that process is revered on the receiving end to return the audio to a flat signal. Why do this? This process of emphasis is not necessary, but the effects are desirable since it increases the signal to noise ratio in the RF signal by having the higher audio tones preemphsized \cite{Gibilisco1994}. The effects of a non emphasized signal being deemphasized can be seen in Figure \ref{emphasisExample}. This causes problems to the demodulation because it can not be assumed that the relative powers of each frequency will be equal since they can have different magnitudes. 
\begin{figure}
  \centering
	\includegraphics[width=0.75\linewidth]{images/EffectsofDeemphasisonaSignalthatwasnotpreemphasized.png} 
	\caption{An Example signal that was deemphasized, but not preemphasized.}
   \label{emphasisExample}
\end{figure}
